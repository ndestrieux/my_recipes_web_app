{% extends "../base.html" %}

{% load static%}

{% load crispy_forms_tags %}

{% block head_scripts %}
    <script src="{% static 'js/inline-form-management.js' %}"></script>
    <script src="{% static 'js/datalist-custom.js' %}"></script>
{% endblock %}


{% block content %}
    <section class="section wb">
        <div class="container">
            <h2>Add new recipe</h2>
            <form method="post">
                {% csrf_token %}
                {{ form.language|as_crispy_field }}
                {{ form.name|as_crispy_field }}
                {{ form.image|as_crispy_field }}
                {{ form.nb_of_people|as_crispy_field }}
                <br>
                <div class="custombox authorbox clearfix">
                    <h4 class="small-title">Ingredients</h4>
                    <div class="form-buttons">
                        <a href="javascript:void(0)" class=" btn btn-primary btn-sm remove_form">Remove form</a>
                        <a href="javascript:void(0)" class="btn btn-primary btn-sm add_form">Add form</a>
                        <br>
                    </div>
                    <div class="form_set">
                        {{ ingredient_forms.management_form }}
                        {{ ingredient_forms.non_form_errors }}
                        {% for ingredient_form in ingredient_forms %}
                        {{ ingredient_form.id }}
                        <fieldset>
                            {{ ingredient_form.id }}
                            <div class="inline {{ ingredient_form.prefix }} mb-2">
                                        {% crispy ingredient_form %}
                            </div>
                        </fieldset>
                        {% endfor %}
                        <div class="empty_form" style="display:none">
                            <fieldset>
                                        {% crispy ingredient_forms.empty_form %}
                            </fieldset>
                        </div>
                    </div>
                </div>
                    <br>
                {{ form.content|as_crispy_field }}
                <input type="submit" class="btn btn-primary" value="Save">
                <a href="{% url 'home' %}" class="btn btn-primary">Cancel</a>
            </form>
        </div>
    </section>

{% endblock %}